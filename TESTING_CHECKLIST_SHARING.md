# プレイリスト共有機能 - テストチェックリスト

## 📋 テスト実施日: __________

## 🎯 テスト環境

### ブラウザ
- [ ] Chrome (最新版)
- [ ] Firefox (最新版)
- [ ] Safari (最新版)
- [ ] Edge (最新版)

### デバイス
- [ ] デスクトップ (> 1024px)
- [ ] タブレット (768px - 1024px)
- [ ] iPad (全画面)
- [ ] iPad (分割画面 50%)
- [ ] iPad (分割画面 33%)
- [ ] モバイル (< 768px)

---

## 1. 全画面プレイヤーのテスト

### A. コントロールボタンの中央揃え

#### デスクトップ
- [ ] コントロールボタンが画面中央に配置されている
- [ ] 5つのボタンが均等に配置されている
- [ ] 音量スライダーが中央に配置されている
- [ ] 音量パーセンテージが表示されている

#### タブレット
- [ ] コントロールボタンが画面中央に配置されている
- [ ] ボタンサイズが適切
- [ ] 音量スライダーが操作しやすい

#### モバイル
- [ ] コントロールボタンが画面中央に配置されている
- [ ] ボタンが重ならない
- [ ] タッチ操作が正常

### B. 音量スライダーの動作

#### マウス操作
- [ ] スライダーをドラッグできる
- [ ] クリックで位置を変更できる
- [ ] ホバー時にカーソルが変わる
- [ ] 音量が正しく変更される

#### タッチ操作
- [ ] スライダーをドラッグできる
- [ ] タップで位置を変更できる
- [ ] スクロールと干渉しない
- [ ] 音量が正しく変更される

### C. レスポンシブ対応

#### iPad全画面
- [ ] レイアウトが崩れない
- [ ] ボタンが適切なサイズ
- [ ] 音量スライダーが操作しやすい

#### iPad分割画面（50%）
- [ ] レイアウトが崩れない
- [ ] ボタンが重ならない
- [ ] 全機能が使用可能

#### iPad分割画面（33%）
- [ ] モバイルレイアウトに切り替わる
- [ ] ボタンが適切なサイズ
- [ ] 全機能が使用可能

---

## 2. サイドバーのテスト

### A. プレイリスト表示

#### 通常時
- [ ] プレイリストアイコンが表示される
- [ ] プレイリスト名が表示される
- [ ] プレイリスト名が途切れない

#### ホバー時
- [ ] アイコンが再生アイコンに切り替わる
- [ ] プレイリスト名に被らない
- [ ] アニメーションがスムーズ

### B. 再生ボタンの動作

- [ ] ホバー時のみ表示される
- [ ] クリックでプレイリストが再生される
- [ ] 最初の曲から再生される
- [ ] プレイリストが空の場合はエラーが表示される

### C. レスポンシブ対応

#### デスクトップ
- [ ] サイドバーが常に表示される
- [ ] プレイリスト名が完全に表示される

#### タブレット
- [ ] アイコンのみ表示される
- [ ] ホバーで名前が表示される（オプション）

#### モバイル
- [ ] サイドバーがオーバーレイ表示される
- [ ] メニューボタンで開閉できる

---

## 3. プレイリストメニューのテスト

### A. メニュー表示

- [ ] タイトル横に「...」ボタンが表示される
- [ ] クリックでメニューが開く
- [ ] メニューが適切な位置に表示される
- [ ] メニュー外をクリックで閉じる

### B. 共有リンクをコピー

- [ ] メニュー項目が表示される
- [ ] クリックでリンクがコピーされる
- [ ] トースト通知が表示される
- [ ] メニューが自動的に閉じる
- [ ] クリップボードに正しいURLがコピーされる

### C. プレイリストを削除

- [ ] メニュー項目が赤色で表示される
- [ ] クリックで確認ダイアログが表示される
- [ ] キャンセルで削除されない
- [ ] OKで削除される
- [ ] ホーム画面にリダイレクトされる
- [ ] サイドバーから削除される

---

## 4. プレイリスト共有のテスト

### A. 共有リンクの生成

- [ ] 正しいURL形式が生成される
- [ ] プレイリストIDが含まれる
- [ ] ドメインが正しい

**生成されたURL:**
```
_________________________________________________
```

### B. 共有ページの表示

#### ページロード
- [ ] ページが正常に読み込まれる
- [ ] ローディング表示が出る
- [ ] プレイリスト情報が表示される

#### プレイリスト情報
- [ ] プレイリスト名が表示される
- [ ] 説明が表示される（ある場合）
- [ ] 作成者名が表示される
- [ ] 曲数が表示される
- [ ] 総再生時間が表示される

#### トラックリスト
- [ ] 全曲が表示される
- [ ] 曲番号が表示される
- [ ] タイトル・アーティストが表示される
- [ ] アルバムが表示される
- [ ] 品質情報が表示される
- [ ] 再生時間が表示される
- [ ] アートワークが表示される（ある場合）

#### UI/UX
- [ ] デザインが美しい
- [ ] レイアウトが崩れない
- [ ] スクロールがスムーズ
- [ ] ホバー効果が動作する

### C. プレイリストのインポート

#### ボタン表示
- [ ] 「ライブラリに追加」ボタンが表示される
- [ ] ボタンが適切な位置にある
- [ ] ボタンが目立つ

#### インポート処理
- [ ] クリックでインポートが開始される
- [ ] ローディング表示が出る
- [ ] 成功時にトースト通知が表示される
- [ ] ホーム画面にリダイレクトされる
- [ ] サイドバーに新しいプレイリストが表示される
- [ ] プレイリスト名に「(コピー)」が付く

#### エラーハンドリング
- [ ] 存在しないプレイリストでエラーが表示される
- [ ] ネットワークエラーで適切なメッセージが表示される
- [ ] エラー時にホーム画面に戻れる

---

## 5. APIのテスト

### A. 共有プレイリスト取得API

**エンドポイント:** `GET /api/playlists/share/[id]`

#### 正常系
- [ ] 200ステータスコードが返る
- [ ] プレイリスト情報が返る
- [ ] トラック情報が返る
- [ ] ファイルパスが含まれない
- [ ] ユーザーのメールアドレスが含まれない

#### 異常系
- [ ] 存在しないIDで404が返る
- [ ] 不正なIDで400が返る
- [ ] エラーメッセージが適切

### B. プレイリストインポートAPI

**エンドポイント:** `POST /api/playlists/share/[id]`

#### 正常系
- [ ] 200ステータスコードが返る
- [ ] 新しいプレイリストが作成される
- [ ] トラックがコピーされる
- [ ] 曲の順序が保持される
- [ ] プレイリスト名に「(コピー)」が付く

#### 異常系
- [ ] userIdがない場合に400が返る
- [ ] 存在しないプレイリストで404が返る
- [ ] エラーメッセージが適切

---

## 6. データベースのテスト

### A. マイグレーション

- [ ] マイグレーションが成功している
- [ ] 新しいフィールドが追加されている
- [ ] 既存データが保持されている

### B. スキーマ

- [ ] `shareToken`フィールドが存在する
- [ ] `isPublic`フィールドが存在する
- [ ] デフォルト値が正しい

### C. データ整合性

- [ ] プレイリストが正しく作成される
- [ ] トラックが正しくコピーされる
- [ ] リレーションが正しく設定される

---

## 7. パフォーマンステスト

### A. ページロード時間

- [ ] 共有ページが2秒以内に読み込まれる
- [ ] トラックリストが遅延なく表示される
- [ ] 画像が遅延読み込みされる

### B. API応答時間

- [ ] 共有プレイリスト取得が1秒以内
- [ ] プレイリストインポートが2秒以内

### C. メモリ使用量

- [ ] メモリリークがない
- [ ] 長時間使用しても安定している

---

## 8. セキュリティテスト

### A. データ保護

- [ ] ファイルパスが公開されない
- [ ] ユーザーのメールアドレスが公開されない
- [ ] 機密情報が含まれない

### B. アクセス制御

- [ ] 共有リンクは誰でもアクセス可能
- [ ] 削除されたプレイリストにアクセスできない

### C. XSS対策

- [ ] プレイリスト名がエスケープされる
- [ ] 説明がエスケープされる
- [ ] スクリプトが実行されない

---

## 9. ユーザビリティテスト

### A. 直感性

- [ ] 機能が直感的に理解できる
- [ ] ボタンの配置が適切
- [ ] アイコンが分かりやすい

### B. フィードバック

- [ ] 操作後に適切なフィードバックがある
- [ ] ローディング状態が表示される
- [ ] エラーメッセージが分かりやすい

### C. アクセシビリティ

- [ ] キーボード操作が可能
- [ ] スクリーンリーダーで読み上げ可能
- [ ] コントラストが十分

---

## 10. ドキュメントのテスト

### A. ガイドの正確性

- [ ] PLAYLIST_SHARING_GUIDE.mdが正確
- [ ] QUICK_START_SHARING.mdが分かりやすい
- [ ] VISUAL_GUIDE_SHARING.mdが役立つ

### B. コード例

- [ ] コード例が動作する
- [ ] API仕様が正確
- [ ] スキーマが最新

---

## 📊 テスト結果サマリー

### 全体の進捗
- 実施項目: ____ / 150
- 合格項目: ____ / 150
- 不合格項目: ____ / 150

### 重大な問題
1. _________________________________________________
2. _________________________________________________
3. _________________________________________________

### 軽微な問題
1. _________________________________________________
2. _________________________________________________
3. _________________________________________________

### 改善提案
1. _________________________________________________
2. _________________________________________________
3. _________________________________________________

---

## ✅ 最終承認

### テスト実施者
- 氏名: _________________________
- 日付: _________________________
- 署名: _________________________

### レビュアー
- 氏名: _________________________
- 日付: _________________________
- 署名: _________________________

### 承認状態
- [ ] 承認（全テスト合格）
- [ ] 条件付き承認（軽微な問題あり）
- [ ] 不承認（重大な問題あり）

---

**作成日:** 2026年2月6日  
**バージョン:** 1.0.0  
**作成者:** Kiro AI Assistant
