{
  "version": 3,
  "sources": ["../../../worker.js"],
  "sourceRoot": "C:\\Users\\haka\\Desktop\\\u30B7\u30E7\u30FC\u30C8\u30AB\u30C3\u30C8\\app\\audio player web\\music-worker-temp\\.wrangler\\tmp\\deploy-ldgka1",
  "sourcesContent": ["export default {\r\n  async fetch(request, env) {\r\n    const url = new URL(request.url);\r\n    \r\n    const corsHeaders = {\r\n      'Access-Control-Allow-Origin': '*',\r\n      'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\r\n      'Access-Control-Allow-Headers': 'Content-Type',\r\n    };\r\n    \r\n    if (request.method === 'OPTIONS') {\r\n      return new Response(null, { status: 204, headers: corsHeaders });\r\n    }\r\n    \r\n    if (url.pathname === '/tunnel' && request.method === 'GET') {\r\n      try {\r\n        const data = await env.TUNNEL_KV.get('current_tunnel_url', 'json');\r\n        \r\n        if (!data) {\r\n          return new Response(JSON.stringify({\r\n            url: null,\r\n            message: '\u30C8\u30F3\u30CD\u30EBURL\u304C\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u307E\u305B\u3093'\r\n          }), {\r\n            status: 200,\r\n            headers: { ...corsHeaders, 'Content-Type': 'application/json' }\r\n          });\r\n        }\r\n        \r\n        return new Response(JSON.stringify(data), {\r\n          status: 200,\r\n          headers: { ...corsHeaders, 'Content-Type': 'application/json' }\r\n        });\r\n      } catch (error) {\r\n        return new Response(JSON.stringify({\r\n          error: 'KV\u8AAD\u307F\u53D6\u308A\u30A8\u30E9\u30FC',\r\n          message: error.message\r\n        }), {\r\n          status: 500,\r\n          headers: { ...corsHeaders, 'Content-Type': 'application/json' }\r\n        });\r\n      }\r\n    }\r\n    \r\n    if (url.pathname === '/tunnel' && request.method === 'POST') {\r\n      try {\r\n        const body = await request.json();\r\n        const tunnelUrl = body.url;\r\n        \r\n        if (!tunnelUrl || typeof tunnelUrl !== 'string') {\r\n          return new Response(JSON.stringify({\r\n            error: 'URL\u304C\u5FC5\u8981\u3067\u3059'\r\n          }), {\r\n            status: 400,\r\n            headers: { ...corsHeaders, 'Content-Type': 'application/json' }\r\n          });\r\n        }\r\n        \r\n        const isValid = \r\n          (tunnelUrl.startsWith('https://') && tunnelUrl.includes('.trycloudflare.com')) ||\r\n          tunnelUrl.startsWith('http://localhost:');\r\n        \r\n        if (!isValid) {\r\n          return new Response(JSON.stringify({\r\n            error: '\u4E0D\u6B63\u306AURL\u5F62\u5F0F\u3067\u3059'\r\n          }), {\r\n            status: 400,\r\n            headers: { ...corsHeaders, 'Content-Type': 'application/json' }\r\n          });\r\n        }\r\n        \r\n        const data = {\r\n          url: tunnelUrl,\r\n          updatedAt: new Date().toISOString()\r\n        };\r\n        \r\n        await env.TUNNEL_KV.put('current_tunnel_url', JSON.stringify(data));\r\n        \r\n        return new Response(JSON.stringify({\r\n          success: true,\r\n          ...data,\r\n          message: 'URL\u3092\u4FDD\u5B58\u3057\u307E\u3057\u305F'\r\n        }), {\r\n          status: 200,\r\n          headers: { ...corsHeaders, 'Content-Type': 'application/json' }\r\n        });\r\n      } catch (error) {\r\n        return new Response(JSON.stringify({\r\n          error: '\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F',\r\n          message: error.message\r\n        }), {\r\n          status: 500,\r\n          headers: { ...corsHeaders, 'Content-Type': 'application/json' }\r\n        });\r\n      }\r\n    }\r\n    \r\n    return new Response(JSON.stringify({\r\n      error: 'Not Found',\r\n      message: '\u5229\u7528\u53EF\u80FD\u306A\u30A8\u30F3\u30C9\u30DD\u30A4\u30F3\u30C8: GET /tunnel, POST /tunnel'\r\n    }), { \r\n      status: 404,\r\n      headers: { ...corsHeaders, 'Content-Type': 'application/json' }\r\n    });\r\n  }\r\n};\r\n"],
  "mappings": ";AAAA,IAAO,iBAAQ;AAAA,EACb,MAAM,MAAM,SAAS,KAAK;AACxB,UAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;AAE/B,UAAM,cAAc;AAAA,MAClB,+BAA+B;AAAA,MAC/B,gCAAgC;AAAA,MAChC,gCAAgC;AAAA,IAClC;AAEA,QAAI,QAAQ,WAAW,WAAW;AAChC,aAAO,IAAI,SAAS,MAAM,EAAE,QAAQ,KAAK,SAAS,YAAY,CAAC;AAAA,IACjE;AAEA,QAAI,IAAI,aAAa,aAAa,QAAQ,WAAW,OAAO;AAC1D,UAAI;AACF,cAAM,OAAO,MAAM,IAAI,UAAU,IAAI,sBAAsB,MAAM;AAEjE,YAAI,CAAC,MAAM;AACT,iBAAO,IAAI,SAAS,KAAK,UAAU;AAAA,YACjC,KAAK;AAAA,YACL,SAAS;AAAA,UACX,CAAC,GAAG;AAAA,YACF,QAAQ;AAAA,YACR,SAAS,EAAE,GAAG,aAAa,gBAAgB,mBAAmB;AAAA,UAChE,CAAC;AAAA,QACH;AAEA,eAAO,IAAI,SAAS,KAAK,UAAU,IAAI,GAAG;AAAA,UACxC,QAAQ;AAAA,UACR,SAAS,EAAE,GAAG,aAAa,gBAAgB,mBAAmB;AAAA,QAChE,CAAC;AAAA,MACH,SAAS,OAAO;AACd,eAAO,IAAI,SAAS,KAAK,UAAU;AAAA,UACjC,OAAO;AAAA,UACP,SAAS,MAAM;AAAA,QACjB,CAAC,GAAG;AAAA,UACF,QAAQ;AAAA,UACR,SAAS,EAAE,GAAG,aAAa,gBAAgB,mBAAmB;AAAA,QAChE,CAAC;AAAA,MACH;AAAA,IACF;AAEA,QAAI,IAAI,aAAa,aAAa,QAAQ,WAAW,QAAQ;AAC3D,UAAI;AACF,cAAM,OAAO,MAAM,QAAQ,KAAK;AAChC,cAAM,YAAY,KAAK;AAEvB,YAAI,CAAC,aAAa,OAAO,cAAc,UAAU;AAC/C,iBAAO,IAAI,SAAS,KAAK,UAAU;AAAA,YACjC,OAAO;AAAA,UACT,CAAC,GAAG;AAAA,YACF,QAAQ;AAAA,YACR,SAAS,EAAE,GAAG,aAAa,gBAAgB,mBAAmB;AAAA,UAChE,CAAC;AAAA,QACH;AAEA,cAAM,UACH,UAAU,WAAW,UAAU,KAAK,UAAU,SAAS,oBAAoB,KAC5E,UAAU,WAAW,mBAAmB;AAE1C,YAAI,CAAC,SAAS;AACZ,iBAAO,IAAI,SAAS,KAAK,UAAU;AAAA,YACjC,OAAO;AAAA,UACT,CAAC,GAAG;AAAA,YACF,QAAQ;AAAA,YACR,SAAS,EAAE,GAAG,aAAa,gBAAgB,mBAAmB;AAAA,UAChE,CAAC;AAAA,QACH;AAEA,cAAM,OAAO;AAAA,UACX,KAAK;AAAA,UACL,YAAW,oBAAI,KAAK,GAAE,YAAY;AAAA,QACpC;AAEA,cAAM,IAAI,UAAU,IAAI,sBAAsB,KAAK,UAAU,IAAI,CAAC;AAElE,eAAO,IAAI,SAAS,KAAK,UAAU;AAAA,UACjC,SAAS;AAAA,UACT,GAAG;AAAA,UACH,SAAS;AAAA,QACX,CAAC,GAAG;AAAA,UACF,QAAQ;AAAA,UACR,SAAS,EAAE,GAAG,aAAa,gBAAgB,mBAAmB;AAAA,QAChE,CAAC;AAAA,MACH,SAAS,OAAO;AACd,eAAO,IAAI,SAAS,KAAK,UAAU;AAAA,UACjC,OAAO;AAAA,UACP,SAAS,MAAM;AAAA,QACjB,CAAC,GAAG;AAAA,UACF,QAAQ;AAAA,UACR,SAAS,EAAE,GAAG,aAAa,gBAAgB,mBAAmB;AAAA,QAChE,CAAC;AAAA,MACH;AAAA,IACF;AAEA,WAAO,IAAI,SAAS,KAAK,UAAU;AAAA,MACjC,OAAO;AAAA,MACP,SAAS;AAAA,IACX,CAAC,GAAG;AAAA,MACF,QAAQ;AAAA,MACR,SAAS,EAAE,GAAG,aAAa,gBAAgB,mBAAmB;AAAA,IAChE,CAAC;AAAA,EACH;AACF;",
  "names": []
}
